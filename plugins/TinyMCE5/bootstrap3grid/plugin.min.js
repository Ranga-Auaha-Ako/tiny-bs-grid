/**
 *	tiny-bs-grid https://github.com/jeffhehe/tiny-bs-grid
 *  Author: Jeff Wang
 *  Date: March 29, 2019
 */
tinymce.PluginManager.add("bootstrap3grid",function(b,e){b.contentCSS.push(e+"/bootstrapgrid-style.css"),b.ui.registry.addToggleButton("bootstrap3grid",{text:"BS3 Grid",tooltip:"Bootstrap3 Grid System",onAction:function(){var e="Insert Bootstrap3 Grids",t="12",a="md",s=b.selection.getNode(),r=jQuery(s).parents("div.row"),d=0<r.length;if(d){var l=r[0],n=jQuery(l).children("div"),c=n.length,u=[];if(0<c)for(t="",i=0;i<c;i++){var o=jQuery(n[i]).attr("class").split(/\s+/),p=jQuery(n[i]).html();for(u.push(p),j=0;j<o.length;j++)if(o[j].match(/col-/)){0==j&&(-1<o[0].indexOf("col-lg")?a="lg":-1<o[0].indexOf("col-sm")?a="sm":-1<o[0].indexOf("col-xs")&&(a="xs"));var v=o[j].lastIndexOf("-"),m=o[j].substr(v+1);t+=m}}e="Update Bootstrap3 Grids"}b.windowManager.open({title:e,width:450,height:150,body:{type:"panel",items:[{type:"selectbox",name:"size",label:"Target Screen",items:[{text:"Large - laptops & desktops",value:"lg"},{text:"Medium - small laptops",value:"md"},{text:"Small - tablets",value:"sm"},{text:"Extra Small - phones",value:"xs"}]},{type:"selectbox",name:"grid",label:"Grid",items:[{text:"1 Column",value:"12"},{text:"2 Columns (1:1)",value:"66"},{text:"2 Columns (2:1)",value:"84"},{text:"2 Columns (3:1)",value:"93"},{text:"2 Columns (1:2)",value:"48"},{text:"2 Columns (1:3)",value:"39"},{text:"3 Columns (1:1:1)",value:"444"},{text:"3 Columns (2:1:1)",value:"633"},{text:"3 Columns (1:2:1)",value:"363"},{text:"3 Columns (1:1:2)",value:"336"},{text:"4 Columns (1:1:1:1)",value:"3333"}]},{type:"checkbox",name:"leadingBreak",label:"Add a Leading Line Break"}]},initialData:{size:a,grid:t},buttons:[{type:"submit",name:"submitBtn",text:"Submit"},{type:"cancel",name:"cancelBtn",text:"Cancel"}],onSubmit:function(e){var l=e.getData(),t="",n="",o="<p></p>";1==l.leadingBreak&&(t="<p></p>");var a=function(e,t){if(d){if(0<c&&c<e){for(var a=0;a<c;a++)n+='<div class="col-'+l.size+"-"+t[a]+'">'+u.shift()+"</div>";for(var s=c;s<e;s++)n+='<div class="col-'+l.size+"-"+t[s]+'"><p>&nbsp;&nbsp;Column '+(s+1)+" ("+Math.round(t[s]/12*100)+"% width)</p><p></p></div>"}else if(e<=c){for(var a=0;a<e;a++)n+='<div class="col-'+l.size+"-"+t[a]+'">'+u.shift()+"</div>";e<c&&(o="<p></p><div>"+u.join("<p></p>")+"</div><p></p>")}}else for(var i=0;i<e;i++)n+='<div class="col-'+l.size+"-"+t[i]+'"><p>&nbsp;&nbsp;Column '+(i+1)+" ("+Math.round(t[i]/12*100)+"% width)</p><p></p></div>"};switch(l.grid){case"12":a(1,[12]);break;case"66":a(2,[6,6]);break;case"84":a(2,[8,4]);break;case"93":a(2,[9,3]);break;case"48":a(2,[4,8]);break;case"39":a(2,[3,9]);break;case"444":a(3,[4,4,4]);break;case"633":a(3,[6,3,3]);break;case"363":a(3,[3,6,3]);break;case"336":a(3,[3,3,6]);break;case"3333":a(4,[3,3,3,3])}d?jQuery(r).replaceWith(t+'<div class="row">'+n+"</div>"+o):b.insertContent(t+'<div class="row">'+n+"</div>"+o),e.close()}})},onSetup:function(t){b.selection.selectorChanged("div.row",function(e){t.setActive(e)})}})});