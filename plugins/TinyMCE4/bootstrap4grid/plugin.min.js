/**
 *	tiny-bs-grid https://github.com/jeffhehe/tiny-bs-grid
 *  Author: Jeff Wang
 *  Date: March 29, 2019
 */

tinymce.PluginManager.add("bootstrap4grid",function(x,e){x.contentCSS.push(e+"/bootstrapgrid-style.css"),x.addButton("bootstrap4grid",{type:"button",text:"BS4 Grid",tooltip:"Bootstrap4 Grid System",stateSelector:"div.row",cmd:"tinymce_bs4_grid"}),x.addCommand("tinymce_bs4_grid",function(){var e="Insert Bootstrap4 Grids",a="12",t="-md",l=x.selection.getNode(),s=jQuery(l).parents("div.row"),o=0<s.length;if(o){var r=s[0],d=jQuery(r).children("div"),n=d.length,u=[];if(0<n)for(a="",i=0;i<n;i++){var v=jQuery(d[i]).attr("class").split(/\s+/),c=jQuery(d[i]).html();for(u.push(c),j=0;j<v.length;j++)if(v[j].match(/col/)){0==j&&(t=-1<v[0].indexOf("col-xl")?"-xl":-1<v[0].indexOf("col-lg")?"-lg":-1<v[0].indexOf("col-md")?"-md":-1<v[0].indexOf("col-sm")?"-sm":"");var p=v[j].lastIndexOf("-");if(-1<p){var m=v[j].substr(p+1);a+=m}else a=""}}e="Update Bootstrap4 Grids"}x.windowManager.open({title:e,width:450,height:150,body:[{type:"listbox",name:"size",label:"Target Screen",values:[{text:"X Large >= 1200px",value:"-xl"},{text:"Large >= 992px",value:"-lg"},{text:"Medium >= 768px",value:"-md"},{text:"Small >= 576px",value:"-sm"},{text:"X Small < 576px",value:""}],value:t},{type:"listbox",name:"grid",label:"Grid",values:[{text:"1 Column",value:"12"},{text:"2 Columns (1:1)",value:"66"},{text:"2 Columns (2:1)",value:"84"},{text:"2 Columns (3:1)",value:"93"},{text:"2 Columns (1:2)",value:"48"},{text:"2 Columns (1:3)",value:"39"},{text:"3 Columns (1:1:1)",value:"444"},{text:"3 Columns (2:1:1)",value:"633"},{text:"3 Columns (1:2:1)",value:"363"},{text:"3 Columns (1:1:2)",value:"336"},{text:"4 Columns (1:1:1:1)",value:"3333"}],value:a},{type:"checkbox",name:"leadingBreak",label:"Add a Leading Line Break"}],onsubmit:function(i){var e="",r="",d="<p></p>";1==i.data.leadingBreak&&(e="<p></p>");var a=function(e,a){if(o){if(0<n&&n<e){for(var t=0;t<n;t++)r+='<div class="col'+i.data.size+"-"+a[t]+'">'+u.shift()+"</div>";for(var l=n;l<e;l++)r+='<div class="col'+i.data.size+"-"+a[l]+'"><p>&nbsp;&nbsp;Column '+(l+1)+" ("+Math.round(a[l]/12*100)+"% width)</p><p></p></div>"}else if(e<=n){for(var t=0;t<e;t++)r+='<div class="col'+i.data.size+"-"+a[t]+'">'+u.shift()+"</div>";e<n&&(d="<p></p><div>"+u.join("<p></p>")+"</div><p></p>")}}else for(var s=0;s<e;s++)r+='<div class="col'+i.data.size+"-"+a[s]+'"><p>&nbsp;&nbsp;Column '+(s+1)+" ("+Math.round(a[s]/12*100)+"% width)</p><p></p></div>"};switch(i.data.grid){case"12":a(1,[12]);break;case"66":a(2,[6,6]);break;case"84":a(2,[8,4]);break;case"93":a(2,[9,3]);break;case"48":a(2,[4,8]);break;case"39":a(2,[3,9]);break;case"444":a(3,[4,4,4]);break;case"633":a(3,[6,3,3]);break;case"363":a(3,[3,6,3]);break;case"336":a(3,[3,3,6]);break;case"3333":a(4,[3,3,3,3])}o?jQuery(s).replaceWith(e+'<div class="row">'+r+"</div>"+d):x.insertContent(e+'<div class="row">'+r+"</div>"+d)}})})});